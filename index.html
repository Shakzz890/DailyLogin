<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"/>
  <title>Shakzz TV</title>
  
  <link rel="manifest" href="manifest.json">
  <link rel="icon" type="image/x-icon" href="Jinwoo.png">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  
  <link rel="stylesheet" href="style.css"> 

  <script src="https://ssl.p.jwpcdn.com/player/v/8.38.10/jwplayer.js"></script>
  <script>jwplayer.key = "ITWMv7t88JGzI0xPwW8I0+LveiXX9SWbfdmt0ArUSyc="</script>
</head>

<body>

  <div id="preloader">
      <div class="loader-content">
          <img src="logo.png" alt="Loading..." class="loader-logo" onerror="this.style.display='none'">
          <div class="spinner"></div>
          <p>Feel Free To Watch!</p>
      </div>
  </div>

  <div class="sidebar" id="main-sidebar">
      <div class="sidebar-header">
          <img src="logo.png" alt="Shakzz TV" class="sidebar-logo" onerror="this.style.display='none'">
          <span class="logo-text">SHAKZZ<span style="color:#e50914;">TV</span></span>
          <span class="close-sidebar" onclick="toggleSidebar()">×</span>
      </div>
      <div class="sidebar-menu">
          <a href="#" onclick="switchView('home')" class="active"><i class="fa-solid fa-house"></i> Home</a>
          <a href="#" onclick="switchView('home'); openCategory('movie', 'Movies')"><i class="fa-solid fa-film"></i> Movies</a>
          
          <a href="#" onclick="switchView('live')"><i class="fa-solid fa-tv"></i> Live TV</a>
          
          <a href="#" onclick="openInfoModal('updates')"><i class="fa-solid fa-bell"></i> Updates</a>
          <a href="#" onclick="openInfoModal('contact')"><i class="fa-solid fa-envelope"></i> Contact</a>
      </div>
      <div class="sidebar-footer">
          <p>Shakzz TV © 2025</p>
      </div>
  </div>
  <div class="overlay" id="overlay" onclick="toggleSidebar()"></div>

  <div class="navbar">
    <div class="nav-left">
        <div class="hamburger" onclick="toggleSidebar()"><i class="fa-solid fa-bars"></i></div>
        <div class="logo-text">SHAKZZ<span style="color:#e50914;">TV</span></div>
    </div>
    <div class="nav-right">
        <div id="viewerCounter" class="view-count" style="margin-right: 15px; color: #e50914; font-weight: bold; font-size: 0.9rem;">
            <i class="fa fa-eye"></i> <span id="live-counter">...</span>
        </div>
        <div class="search-trigger" onclick="openSearchModal()"><i class="fa-solid fa-magnifying-glass"></i></div>
        <div id="auth-container">
            <button id="login-btn" class="login-btn">
                <i class="fa-brands fa-google"></i> <span class="login-text">Sign In</span>
            </button>
        </div>
    </div>
  </div>

  <div id="home-view">
      <div class="slider-viewport">
        <div class="slider-track" id="slider-track"></div>
        <div class="slider-dots" id="slider-dots"></div>
      </div>

      <div class="row">
        <h2 onclick="openCategory('airing_today', 'Latest Updates')">
            <span class="section-indicator"></span> Latest Updates <i class="fa-solid fa-chevron-right"></i>
        </h2>
        <div class="list" id="latest-list"></div>
      </div>

      <div class="row"><h2 onclick="openCategory('kdrama', 'Top K-Drama')"><span class="section-indicator"></span> Top K-Drama <i class="fa-solid fa-chevron-right"></i></h2><div class="list" id="kdrama-list"></div></div>
      <div class="row"><h2 onclick="openCategory('cdrama', 'Top C-Drama')"><span class="section-indicator"></span> Top C-Drama <i class="fa-solid fa-chevron-right"></i></h2><div class="list" id="cdrama-list"></div></div>
      <div class="row"><h2 onclick="openCategory('movie', 'Trending Movies')"><span class="section-indicator"></span> Trending Movies <i class="fa-solid fa-chevron-right"></i></h2><div class="list" id="movies-list"></div></div>
      <div class="row"><h2 onclick="openCategory('tv', 'Trending TV Shows')"><span class="section-indicator"></span> Trending TV Shows <i class="fa-solid fa-chevron-right"></i></h2><div class="list" id="tvshows-list"></div></div>
      <div class="row"><h2 onclick="openCategory('anime', 'Trending Anime')"><span class="section-indicator"></span> Trending Anime <i class="fa-solid fa-chevron-right"></i></h2><div class="list" id="anime-list"></div></div>
      
      <footer class="footer">
        <div class="footer-links">
          <a href="#" onclick="openInfoModal('dmca')">Disclaimer</a>
          <a href="#" onclick="openInfoModal('privacy')">Privacy</a>
        </div>
        <p>© 2025 Shakzz TV.</p>
      </footer>
  </div>

  <div id="live-view" style="display: none;">
      
      <div class="main-player-section">
            <div id="playerWrapper">
                <div id="video">
                    <div class="skeleton" style="width: 100%; height: 100%; position: absolute; top: 0; left: 0; background: #000;"></div>
                </div>
                <div id="overlayContainer">
                    <div id="nowPlayingOverlay">
                        <span style="width:8px; height:8px; background:#ef4444; border-radius:50%; display:inline-block;"></span>
                        Now Playing: <span id="nowPlayingChannel">--</span>
                    </div>
                </div>
            </div>
      </div>

      <div class="channel-sidebar-container">
            <div class="search-container">
                <input type="text" id="search" placeholder="Search channel..." class="focusable-element skeleton-effect" tabindex="0">
                <span id="clearSearch" class="clear-btn">×</span>
            </div>

            <div class="category-bar"></div>

            <button id="mobileCategoryBtn" class="mobile-category-btn focusable-element">
                <span>All Categories</span>
                <i class="fas fa-chevron-down"></i>
            </button>

            <div id="animeSeriesContainer" class="anime-selector-container" style="display: none;">
                <select id="animeSeriesSelect" class="focusable-element skeleton-effect">
                    <option value="" disabled selected>Select Anime Title</option>
                </select>
            </div>
            
            <button id="clearFavoritesBtn" class="clear-fav-btn focusable-element" style="display:none;">
                <i class="fas fa-trash"></i> Clear Favorites
            </button>

            <div id="channelCount">
                <i class="fas fa-tv"></i>
                <span id="channelCountText">Loading...</span>
            </div>

            <div class="scrollable-list">
                <div class="channel-list" id="channelList"></div>
            </div>
      </div>
  </div>

  <div id="detail-view" class="detail-view">
      <div class="detail-video-container">
          <iframe id="detail-video" allowfullscreen></iframe>
          <div class="detail-close" onclick="closeDetailView()"><i class="fa-solid fa-chevron-down"></i></div>
      </div>
      <div class="detail-content">
          <h1 id="detail-title">Title</h1>
          <div class="detail-meta"><span class="badge">HD</span></div>
          <div class="server-select-container">
               <select id="detail-server" onchange="changeDetailServer()">
                   <option value="vidsrc.to">Server 1</option>
                   <option value="vidsrc.me">Server 2</option>
               </select>
          </div>
          <div class="detail-desc"><p id="detail-overview">...</p></div>
          <div class="episode-grid" id="episode-grid"></div>
      </div>
  </div>

  <div id="category-view" class="category-view">
      <div class="category-header">
          <i class="fa-solid fa-arrow-left" onclick="closeCategory()"></i>
          <h1 id="category-title">Category</h1>
      </div>
      <div class="category-content" id="category-content">
          <div class="category-grid" id="category-grid"></div>
      </div>
  </div>

  <div class="search-modal" id="search-modal">
    <span class="close" onclick="closeSearchModal()">×</span>
    <input type="text" id="search-input" placeholder="Search..." oninput="searchTMDB()" />
    <div class="results" id="search-results"></div>
  </div>

  <div id="categoryModal" class="modal-overlay">
      <div class="modal-content category-modal-content">
          <span class="close-button" id="closeCategoryModal">×</span>
          <h3 class="modal-heading">Select Category</h3>
          <div id="mobileCategoryList" class="mobile-category-list"></div>
      </div>
  </div>

  <div id="info-modal" class="info-modal">
      <div class="info-content-wrapper">
          <div class="info-header">
              <h2 id="info-title">Page Title</h2>
              <span class="close-info" onclick="closeInfoModal()">×</span>
          </div>
          <div class="info-body" id="info-body"></div>
      </div>
  </div>
  
  <script src="channels.js"></script>
  <script src="script.js"></script>

  <script>
      function switchView(viewName) {
          const home = document.getElementById('home-view');
          const live = document.getElementById('live-view');
          const sidebar = document.getElementById('main-sidebar');
          const overlay = document.getElementById('overlay');
          
          if(viewName === 'live') {
              // HIDE HOME, SHOW LIVE
              home.style.display = 'none';
              live.style.display = 'flex'; 
              
              if(window.innerWidth < 1024) live.style.flexDirection = 'column';
              if(window.jwplayer) { try { jwplayer().resize(); } catch(e){} }
          } else {
              // SHOW HOME, HIDE LIVE
              home.style.display = 'block';
              live.style.display = 'none';
              if(window.jwplayer) { try { jwplayer().stop(); } catch(e){} }
          }
          
          if(window.innerWidth < 1024) {
              sidebar.classList.remove('open');
              overlay.classList.remove('active');
          }
      }
      
      // Init Visitor Count
      let userId = localStorage.getItem('visitor_uid') || Math.random().toString(36).substring(7);
      localStorage.setItem('visitor_uid', userId);
      async function updateOnlineCount() {
        try {
          const response = await fetch(`/api/visit?uid=${userId}&t=${Date.now()}`);
          if (response.ok) {
            const data = await response.json();
            document.getElementById('live-counter').innerText = data.count.toLocaleString();
          }
        } catch (err) {}
      }
      setInterval(updateOnlineCount, 5000);
      updateOnlineCount();
  </script>

</body>
</html>
